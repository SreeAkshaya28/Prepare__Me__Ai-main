<!-- <!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Topic Explanation</title>
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;700&display=swap" rel="stylesheet">
    <style>
        /* General Styles */
        body {
            font-family: 'Roboto', sans-serif;
            margin: 0;
            padding: 0;
            background-color: #f0f2f5;
            color: #333;
        }

        .container {
            max-width: 800px;
            margin: 50px auto;
            padding: 30px;
            background-color: #fff;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.1);
            border-radius: 12px;
            transition: box-shadow 0.3s ease;
        }

        .container:hover {
            box-shadow: 0 6px 25px rgba(0, 0, 0, 0.15);
        }

        h1 {
            text-align: center;
            margin-bottom: 30px;
            font-size: 2.5em;
            color: #007bff;
            letter-spacing: 1px;
        }

        .explanation {
            text-align: left;
            margin-bottom: 30px;
            line-height: 1.6;
            padding: 20px;
            border-radius: 8px;
            background-color: #f9f9f9;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
        }

        .button-group {
            display: flex;
            justify-content: space-between;
            margin-top: 20px;
        }

        .btn {
            flex: 1;
            margin: 0 10px;
            padding: 12px 20px;
            font-size: 1em;
            font-weight: 600;
            color: #fff;
            background-color: #007bff;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            text-decoration: none;
            transition: background-color 0.3s ease, transform 0.2s ease;
        }

        .btn:hover {
            background-color: #0056b3;
            transform: translateY(-2px);
        }

        /* Loading Indicator Styles */
        #loading {
            display: none;
            text-align: center;
            font-size: 1.2em;
            color: #007bff;
            margin: 20px 0;
        }

        /* Responsive Design */
        @media (max-width: 768px) {
            .button-group {
                flex-direction: column;
            }

            .btn {
                margin: 10px 0;
                width: 100%;
            }
        }
    </style>
</head>

<body>
    <div class="container">
        <h1>Topic Explanation</h1>
        <div id="loading">Loading explanation...</div>
        <div id="explanation" class="explanation"></div>
        <div class="button-group">
            <button id="backBtn" class="btn">Back</button>
            <button id="askDoubtBtn" class="btn">Ask Doubt</button>
            <button id="takeTestBtn" class="btn">Take Test</button>
        </div>
    </div>

    <script>
        document.getElementById('backBtn').addEventListener('click', () => {
            window.history.back();
        });

        document.getElementById('askDoubtBtn').addEventListener('click', () => {
            const concept = new URLSearchParams(window.location.search).get('concept');
            const explanation = document.getElementById("explanation").textContent;
            window.location.href = `/chat.html?concept=${encodeURIComponent(concept)}&explanation=${encodeURIComponent(explanation)}`;
        });

        document.getElementById('takeTestBtn').addEventListener('click', () => {
            const concept = new URLSearchParams(window.location.search).get('concept');
            window.location.href = `/test.html?concept=${encodeURIComponent(concept)}`;
        });

        window.onload = async () => {
            const urlParams = new URLSearchParams(window.location.search);
            const concept = urlParams.get('concept');
            const concatenatedText = sessionStorage.getItem('concatenatedText');

            const loadingIndicator = document.getElementById('loading');
            loadingIndicator.style.display = 'block'; // Show loading indicator

            try {
                const response = await fetch('/explain', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify({
                        concept: concept,
                        concatenated_text: concatenatedText
                    })
                });

                if (!response.ok) {
                    throw new Error(`HTTP error! Status: ${response.status}`);
                }

                const data = await response.json();
                console.log('Received data:', data); // Log received data for debugging

                // Split response into lines and display each line
                const lines = data.explanation.split('\n');
                const explanationDiv = document.getElementById('explanation');
                explanationDiv.innerHTML = ''; // Clear previous explanation

                lines.forEach(line => {
                    const p = document.createElement('p');
                    p.textContent = line;
                    explanationDiv.appendChild(p);
                });
            } catch (error) {
                console.error('Error fetching data:', error);
                document.getElementById('explanation').textContent = "Error fetching explanation. Please try again.";
            } finally {
                loadingIndicator.style.display = 'none'; // Hide loading indicator
            }
        };
    </script>
</body>

</html> -->






<!-- 
<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Topic Explanation</title>
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;700&display=swap" rel="stylesheet">
    <style>
        /* General Styles */
        body {
            font-family: 'Roboto', sans-serif;
            margin: 0;
            padding: 0;
            background-color: #f0f2f5;
            color: #333;
        }

        .container {
            max-width: 800px;
            margin: 50px auto;
            padding: 30px;
            background-color: #fff;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.1);
            border-radius: 12px;
            transition: box-shadow 0.3s ease;
        }

        .container:hover {
            box-shadow: 0 6px 25px rgba(0, 0, 0, 0.15);
        }

        h1 {
            text-align: center;
            margin-bottom: 30px;
            font-size: 2.5em;
            color: #007bff;
            letter-spacing: 1px;
        }

        .explanation {
            text-align: left;
            margin-bottom: 30px;
            line-height: 1.6;
            padding: 20px;
            border-radius: 8px;
            background-color: #f9f9f9;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
        }

        .button-group {
            display: flex;
            justify-content: space-between;
            margin-top: 20px;
        }

        .btn {
            flex: 1;
            margin: 0 10px;
            padding: 12px 20px;
            font-size: 1em;
            font-weight: 600;
            color: #fff;
            background-color: #007bff;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            text-decoration: none;
            transition: background-color 0.3s ease, transform 0.2s ease;
        }

        .btn:hover {
            background-color: #0056b3;
            transform: translateY(-2px);
        }

        /* Loading Indicator Styles */
        #loading {
            display: none;
            text-align: center;
            font-size: 1.2em;
            color: #007bff;
            margin: 20px 0;
        }

        /* Responsive Design */
        @media (max-width: 768px) {
            .button-group {
                flex-direction: column;
            }

            .btn {
                margin: 10px 0;
                width: 100%;
            }
        }
    </style>
</head>

<body>
    <div class="container">
        <h1>Topic Explanation</h1>
        <div id="loading">Loading explanation...</div>
        <div id="explanation" class="explanation"></div>
        <div class="button-group">
            <button id="backBtn" class="btn">Back</button>
            <button id="askDoubtBtn" class="btn">Ask Doubt</button>
            <button id="takeTestBtn" class="btn">Take Test</button>
        </div>
        <div id="stopwatch" class="explanation">Time: 0 seconds</div>
    </div>

    <script>
        // Stopwatch variables
        let startTime;
        let timerInterval;
        let elapsedTime = 0;

        // Start stopwatch when the page is loaded
        window.onload = () => {
            startTime = Date.now() - elapsedTime; // Account for any previous time
            timerInterval = setInterval(updateStopwatch, 1000); // Update every second

            const urlParams = new URLSearchParams(window.location.search);
            const concept = urlParams.get('concept');
            const concatenatedText = sessionStorage.getItem('concatenatedText');

            const loadingIndicator = document.getElementById('loading');
            loadingIndicator.style.display = 'block'; // Show loading indicator

            // Fetch data for the explanation
            fetchExplanation(concept, concatenatedText, loadingIndicator);
        };

        // Function to update stopwatch on the webpage
        function updateStopwatch() {
            elapsedTime = Date.now() - startTime;
            document.getElementById('stopwatch').textContent = 'Time: ' + Math.floor(elapsedTime / 1000) + ' seconds';
        }

        // Stop and log the stopwatch time when the page is closed or refreshed
        window.onbeforeunload = () => {
            clearInterval(timerInterval); // Stop the timer
            console.log('Total time spent on page: ' + Math.floor(elapsedTime / 1000) + ' seconds');
        };

        // Fetch explanation data and display it
        async function fetchExplanation(concept, concatenatedText, loadingIndicator) {
            try {
                const response = await fetch('/explain', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify({
                        concept: concept,
                        concatenated_text: concatenatedText
                    })
                });

                if (!response.ok) {
                    throw new Error(`HTTP error! Status: ${response.status}`);
                }

                const data = await response.json();
                console.log('Received data:', data); // Log received data for debugging

                // Split response into lines and display each line
                const lines = data.explanation.split('\n');
                const explanationDiv = document.getElementById('explanation');
                explanationDiv.innerHTML = ''; // Clear previous explanation

                lines.forEach(line => {
                    const p = document.createElement('p');
                    p.textContent = line;
                    explanationDiv.appendChild(p);
                });
            } catch (error) {
                console.error('Error fetching data:', error);
                document.getElementById('explanation').textContent = "Error fetching explanation. Please try again.";
            } finally {
                loadingIndicator.style.display = 'none'; // Hide loading indicator
            }
        }

        // Event listeners for buttons
        document.getElementById('backBtn').addEventListener('click', () => {
            window.history.back();
        });

        document.getElementById('askDoubtBtn').addEventListener('click', () => {
            const concept = new URLSearchParams(window.location.search).get('concept');
            const explanation = document.getElementById("explanation").textContent;
            window.location.href = `/chat.html?concept=${encodeURIComponent(concept)}&explanation=${encodeURIComponent(explanation)}`;
        });

        document.getElementById('takeTestBtn').addEventListener('click', () => {
            const concept = new URLSearchParams(window.location.search).get('concept');
            window.location.href = `/test.html?concept=${encodeURIComponent(concept)}`;
        });
    </script>
</body>

</html> -->




<!-- 
<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Topic Explanation</title>
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;700&display=swap" rel="stylesheet">
    <style>
        /* General Styles */
        body {
            font-family: 'Roboto', sans-serif;
            margin: 0;
            padding: 0;
            background-color: #f0f2f5;
            color: #333;
        }

        .container {
            max-width: 800px;
            margin: 50px auto;
            padding: 30px;
            background-color: #fff;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.1);
            border-radius: 12px;
            transition: box-shadow 0.3s ease;
        }

        .container:hover {
            box-shadow: 0 6px 25px rgba(0, 0, 0, 0.15);
        }

        h1 {
            text-align: center;
            margin-bottom: 30px;
            font-size: 2.5em;
            color: #007bff;
            letter-spacing: 1px;
        }

        .explanation {
            text-align: left;
            margin-bottom: 30px;
            line-height: 1.6;
            padding: 20px;
            border-radius: 8px;
            background-color: #f9f9f9;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
        }

        .button-group {
            display: flex;
            justify-content: space-between;
            margin-top: 20px;
        }

        .btn {
            flex: 1;
            margin: 0 10px;
            padding: 12px 20px;
            font-size: 1em;
            font-weight: 600;
            color: #fff;
            background-color: #007bff;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            text-decoration: none;
            transition: background-color 0.3s ease, transform 0.2s ease;
        }

        .btn:hover {
            background-color: #0056b3;
            transform: translateY(-2px);
        }

        /* Loading Indicator Styles */
        #loading {
            display: none;
            text-align: center;
            font-size: 1.2em;
            color: #007bff;
            margin: 20px 0;
        }

        /* Responsive Design */
        @media (max-width: 768px) {
            .button-group {
                flex-direction: column;
            }

            .btn {
                margin: 10px 0;
                width: 100%;
            }
        }
    </style>
</head>

<body>
    <div class="container">
        <h1>Topic Explanation</h1>
        <div id="loading">Loading explanation...</div>
        <div id="explanation" class="explanation"></div>
        <div class="button-group">
            <button id="backBtn" class="btn">Back</button>
            <button id="askDoubtBtn" class="btn">Ask Doubt</button>
            <button id="takeTestBtn" class="btn">Take Test</button>
        </div>
        <div id="stopwatch" class="explanation">Time: 0 seconds</div>
    </div>

    <script>
        // Stopwatch variables
        let startTime;
        let timerInterval;
        let elapsedTime = 0;

        // Start stopwatch when the page is loaded
        window.onload = () => {
            startTime = Date.now() - elapsedTime; // Account for any previous time
            timerInterval = setInterval(updateStopwatch, 1000); // Update every second

            const urlParams = new URLSearchParams(window.location.search);
            const concept = urlParams.get('concept');
            const concatenatedText = sessionStorage.getItem('concatenatedText');

            const loadingIndicator = document.getElementById('loading');
            loadingIndicator.style.display = 'block'; // Show loading indicator

            // Fetch data for the explanation
            fetchExplanation(concept, concatenatedText, loadingIndicator);
        };

        // Function to update stopwatch on the webpage
        function updateStopwatch() {
            elapsedTime = Date.now() - startTime;
            document.getElementById('stopwatch').textContent = 'Time: ' + Math.floor(elapsedTime / 1000) + ' seconds';
        }

        // Stop and log the stopwatch time when the page is about to be unloaded
        window.onbeforeunload = () => {
            clearInterval(timerInterval); // Stop the timer
            console.log('Total time spent on page: ' + Math.floor(elapsedTime / 1000) + ' seconds');
        };

        // Fetch explanation data and display it
        async function fetchExplanation(concept, concatenatedText, loadingIndicator) {
            try {
                const response = await fetch('/explain', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify({
                        concept: concept,
                        concatenated_text: concatenatedText
                    })
                });

                if (!response.ok) {
                    throw new Error(`HTTP error! Status: ${response.status}`);
                }

                const data = await response.json();
                console.log('Received data:', data); // Log received data for debugging

                // Split response into lines and display each line
                const lines = data.explanation.split('\n');
                const explanationDiv = document.getElementById('explanation');
                explanationDiv.innerHTML = ''; // Clear previous explanation

                lines.forEach(line => {
                    const p = document.createElement('p');
                    p.textContent = line;
                    explanationDiv.appendChild(p);
                });
            } catch (error) {
                console.error('Error fetching data:', error);
                document.getElementById('explanation').textContent = "Error fetching explanation. Please try again.";
            } finally {
                loadingIndicator.style.display = 'none'; // Hide loading indicator
            }
        }

        // Event listeners for buttons
        document.getElementById('backBtn').addEventListener('click', () => {
            window.history.back();
        });

        document.getElementById('askDoubtBtn').addEventListener('click', () => {
            const concept = new URLSearchParams(window.location.search).get('concept');
            const explanation = document.getElementById("explanation").textContent;
            window.location.href = `/chat.html?concept=${encodeURIComponent(concept)}&explanation=${encodeURIComponent(explanation)}`;
        });

        document.getElementById('takeTestBtn').addEventListener('click', () => {
            const concept = new URLSearchParams(window.location.search).get('concept');
            window.location.href = `/test.html?concept=${encodeURIComponent(concept)}`;
        });
    </script>
</body>

</html> -->
















<!-- correct working code -->
<!-- <!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Topic Explanation</title>
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;700&display=swap" rel="stylesheet">
    <style>
        /* General Styles */
        body {
            font-family: 'Roboto', sans-serif;
            margin: 0;
            padding: 0;
            background-color: #f0f2f5;
            color: #333;
        }
        .container {
            max-width: 800px;
            margin: 50px auto;
            padding: 30px;
            background-color: #fff;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.1);
            border-radius: 12px;
            transition: box-shadow 0.3s ease;
        }
        .container:hover {
            box-shadow: 0 6px 25px rgba(0, 0, 0, 0.15);
        }
        h1 {
            text-align: center;
            margin-bottom: 30px;
            font-size: 2.5em;
            color: #007bff;
            letter-spacing: 1px;
        }
        .explanation {
            text-align: left;
            margin-bottom: 30px;
            line-height: 1.6;
            padding: 20px;
            border-radius: 8px;
            background-color: #f9f9f9;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
        }
        .button-group {
            display: flex;
            justify-content: space-between;
            margin-top: 20px;
        }
        .btn {
            flex: 1;
            margin: 0 10px;
            padding: 12px 20px;
            font-size: 1em;
            font-weight: 600;
            color: #fff;
            background-color: #007bff;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            text-decoration: none;
            transition: background-color 0.3s ease, transform 0.2s ease;
        }
        .btn:hover {
            background-color: #0056b3;
            transform: translateY(-2px);
        }
        /* Loading Indicator Styles */
        #loading {
            display: none;
            text-align: center;
            font-size: 1.2em;
            color: #007bff;
            margin: 20px 0;
        }
        /* Responsive Design */
        @media (max-width: 768px) {
            .button-group {
                flex-direction: column;
            }
            .btn {
                margin: 10px 0;
                width: 100%;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>Topic Explanation</h1>
        <div id="loading">Loading explanation...</div>
        <div id="explanation" class="explanation"></div>
        <div class="button-group">
            <button id="backBtn" class="btn">Back</button>
            <button id="askDoubtBtn" class="btn">Ask Doubt</button>
            <button id="takeTestBtn" class="btn">Take Test</button>
        </div>
        <div id="stopwatch" class="explanation">Time: 0 seconds</div>
    </div>

    <script>
        // Stopwatch variables
        let startTime;
        let timerInterval;
        let elapsedTime = 0;
    
        // Start stopwatch when the page is loaded
        window.onload = () => {
            startTime = Date.now() - elapsedTime; // Account for any previous time
            timerInterval = setInterval(updateStopwatch, 1000); // Update every second
    
            const urlParams = new URLSearchParams(window.location.search);
            const concept = urlParams.get('concept');
            const concatenatedText = sessionStorage.getItem('concatenatedText');
    
            const loadingIndicator = document.getElementById('loading');
            loadingIndicator.style.display = 'block'; // Show loading indicator
    
            // Fetch data for the explanation
            fetchExplanation(concept, concatenatedText, loadingIndicator);
        };
    
        // Function to update stopwatch on the webpage
        function updateStopwatch() {
            elapsedTime = Date.now() - startTime;
            document.getElementById('stopwatch').textContent = 'Time: ' + Math.floor(elapsedTime / 1000) + ' seconds';
        }
    
        // Stop and log the stopwatch time when the page is about to be unloaded
        window.onbeforeunload = async () => {
            clearInterval(timerInterval); // Stop the timer
            const totalTimeSpent = Math.floor(elapsedTime / 1000);
            console.log('Total time spent on page: ' + totalTimeSpent + ' seconds');
    
            // Send time spent along with other data to the server
            const concept = new URLSearchParams(window.location.search).get('concept');
            const concatenatedText = sessionStorage.getItem('concatenatedText');
    
            try {
                await fetch('/explain', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify({
                        concept: concept,
                        concatenated_text: concatenatedText,
                        timeSpent: totalTimeSpent // Add time spent on page
                    })
                });
            } catch (error) {
                console.error('Failed to send time spent:', error);
            }
        };
    
        // Fetch explanation data and display it
        async function fetchExplanation(concept, concatenatedText, loadingIndicator) {
            try {
                const response = await fetch('/explain', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify({
                        concept: concept,
                        concatenated_text: concatenatedText
                    })
                });
    
                if (!response.ok) {
                    throw new Error(`HTTP error! Status: ${response.status}`);
                }
    
                const data = await response.json();
                console.log('Received data:', data); // Log received data for debugging
    
                // Split response into lines and display each line
                const lines = data.explanation.split('\n');
                const explanationDiv = document.getElementById('explanation');
                explanationDiv.innerHTML = ''; // Clear previous explanation
    
                lines.forEach(line => {
                    const p = document.createElement('p');
                    p.textContent = line;
                    explanationDiv.appendChild(p);
                });
            } catch (error) {
                console.error('Error fetching data:', error);
                document.getElementById('explanation').textContent = "Error fetching explanation. Please try again.";
            } finally {
                loadingIndicator.style.display = 'none'; // Hide loading indicator
            }
        }
    
        // Event listeners for buttons
        document.getElementById('backBtn').addEventListener('click', () => {
            window.history.back();
        });
    
        document.getElementById('askDoubtBtn').addEventListener('click', () => {
            const concept = new URLSearchParams(window.location.search).get('concept');
            const explanation = document.getElementById("explanation").textContent;
            window.location.href = `/chat.html?concept=${encodeURIComponent(concept)}&explanation=${encodeURIComponent(explanation)}`;
        });
    
        document.getElementById('takeTestBtn').addEventListener('click', () => {
            const concept = new URLSearchParams(window.location.search).get('concept');
            window.location.href = `/test.html?concept=${encodeURIComponent(concept)}`;
        });
    </script>
    
</body>
</html> -->









<!-- <!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Topic Explanation</title>
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;700&display=swap" rel="stylesheet">
    <style>
        /* General Styles */
        body {
            font-family: 'Roboto', sans-serif;
            margin: 0;
            padding: 0;
            background-color: #f0f2f5;
            color: #333;
        }
        .container {
            max-width: 800px;
            margin: 50px auto;
            padding: 30px;
            background-color: #fff;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.1);
            border-radius: 12px;
        }
        h1 {
            text-align: center;
            margin-bottom: 30px;
            font-size: 2.5em;
            color: #007bff;
            letter-spacing: 1px;
        }
        .explanation {
            text-align: left;
            margin-bottom: 20px;
            line-height: 1.6;
            padding: 20px;
            border-radius: 8px;
            background-color: #f9f9f9;
            display: none; /* Hide all sections initially */
        }
        .explanation.active {
            display: block; /* Display the current section */
        }
        .button-group {
            display: flex;
            justify-content: space-between;
            margin-top: 20px;
        }
        .btn {
            padding: 12px 20px;
            font-size: 1em;
            font-weight: 600;
            color: #fff;
            background-color: #007bff;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            text-decoration: none;
            transition: background-color 0.3s ease, transform 0.2s ease;
        }
        .btn:hover {
            background-color: #0056b3;
            transform: translateY(-2px);
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>Topic Explanation</h1>
        <div id="loading">Loading explanation...</div>
        <div id="explanation-section-1" class="explanation">Explanation part 1 content...</div>
        <div id="explanation-section-2" class="explanation">Explanation part 2 content...</div>
        <div id="explanation-section-3" class="explanation">Explanation part 3 content...</div>
        <div id="explanation-section-4" class="explanation">Explanation part 4 content...</div>
        
        <div class="button-group">
            <button id="prevBtn" class="btn" onclick="changePage(-1)">Previous</button>
            <button id="nextBtn" class="btn" onclick="changePage(1)">Next</button>
        </div>
    </div>

    <script>
        let currentPage = 1;
        const totalSections = 4;

        // Show the initial page content
        document.addEventListener("DOMContentLoaded", function () {
            showPage(currentPage);
        });

        // Function to show the current page
        function showPage(page) {
            for (let i = 1; i <= totalSections; i++) {
                document.getElementById(`explanation-section-${i}`).classList.remove('active');
            }
            document.getElementById(`explanation-section-${page}`).classList.add('active');
            document.getElementById('prevBtn').style.display = page === 1 ? 'none' : 'inline-block';
            document.getElementById('nextBtn').style.display = page === totalSections ? 'none' : 'inline-block';
        }

        // Function to handle page changes
        function changePage(step) {
            currentPage += step;
            if (currentPage < 1) currentPage = 1;
            if (currentPage > totalSections) currentPage = totalSections;
            showPage(currentPage);
        }
    </script>
</body>
</html> -->






















<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PrepareMeAI - Topic Explanation</title>
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Roboto', sans-serif;
            margin: 0;
            padding: 0;
            background-color: #f0f2f5;
            color: #333;
        }
        
        .container {
            max-width: 800px;
            margin: 50px auto;
            padding: 30px;
            background-color: #fff;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.1);
            border-radius: 12px;
        }
        
        h1 {
            text-align: center;
            margin-bottom: 30px;
            font-size: 2.5em;
            color: #007bff;
            letter-spacing: 1px;
        }
        
        .page-content {
            display: none;
            margin-bottom: 25px;
            padding: 20px;
            border-radius: 8px;
            background-color: #f9f9f9;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
        }
        
        .page-content.active {
            display: block;
            animation: fadeIn 0.5s ease-in;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }
        
        .page-content h2 {
            color: #0056b3;
            margin-bottom: 15px;
        }
        
        .navigation-buttons {
            display: flex;
            justify-content: space-between;
            margin: 20px 0;
            gap: 10px;
        }
        
        .action-buttons {
            display: flex;
            justify-content: space-between;
            margin-top: 30px;
            gap: 15px;
        }
        
        .btn {
            padding: 12px 20px;
            font-size: 1em;
            font-weight: 600;
            color: #fff;
            background-color: #007bff;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .nav-btn {
            background-color: #6c757d;
            flex: 1;
        }
        
        .action-btn {
            background-color: #007bff;
            flex: 1;
        }
        
        .btn:hover {
            opacity: 0.9;
            transform: translateY(-2px);
        }
        
        .btn:disabled {
            background-color: #ccc;
            cursor: not-allowed;
            transform: none;
        }
        
        .page-indicator {
            text-align: center;
            margin: 20px 0;
            color: #666;
        }
        
        .dot {
            height: 10px;
            width: 10px;
            background-color: #bbb;
            border-radius: 50%;
            display: inline-block;
            margin: 0 5px;
            transition: background-color 0.3s ease;
        }
        
        .dot.active {
            background-color: #007bff;
        }
        
        #timer {
            text-align: right;
            color: #666;
            font-size: 0.9em;
            margin-top: 20px;
        }
        
        @media (max-width: 768px) {
            .container {
                margin: 20px;
                padding: 20px;
            }
            
            .navigation-buttons, .action-buttons {
                flex-direction: column;
            }
            
            .btn {
                margin: 5px 0;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <h1 id="topicTitle">Loading Topic...</h1>
        
        <!-- Page 1 -->
        <div class="page-content active" id="page1">
            <h2>Definition and Basics</h2>
            <div class="content">
                <p>This is the first page containing the definition and basic concepts of the topic. The content here will help establish a foundation for understanding the more complex aspects that follow.</p>
            </div>
        </div>
        
        <!-- Page 2 -->
        <div class="page-content" id="page2">
            <h2>Detailed Explanation</h2>
            <div class="content">
                <p>This is the second page containing a more detailed explanation of the topic. Here we dive deeper into the concepts and explore their various aspects.</p>
            </div>
        </div>
        
        <!-- Page 3 -->
        <div class="page-content" id="page3">
            <h2>Examples</h2>
            <div class="content">
                <p>This is the third page containing practical examples that illustrate the concepts. Examples help reinforce understanding through practical application.</p>
            </div>
        </div>
        
        <!-- Page 4 -->
        <div class="page-content" id="page4">
            <h2>Analogies and Summary</h2>
            <div class="content">
                <p>This is the fourth page containing helpful analogies and a summary of the topic. These analogies help relate complex concepts to familiar ideas.</p>
            </div>
        </div>
        
        <!-- Navigation Buttons -->
        <div class="navigation-buttons">
            <button class="btn nav-btn" id="prevBtn" onclick="changePage(-1)" disabled>Previous</button>
            <button class="btn nav-btn" id="nextBtn" onclick="changePage(1)">Next</button>
        </div>
        
        <!-- Page Indicator -->
        <div class="page-indicator">
            <span class="dot active"></span>
            <span class="dot"></span>
            <span class="dot"></span>
            <span class="dot"></span>
        </div>
        
        <!-- Action Buttons (present on all pages) -->
        <div class="action-buttons">
            <button class="btn action-btn" onclick="goBack()">Back</button>
            <button class="btn action-btn" onclick="openChatbot()">Ask Doubt</button>
            <button class="btn action-btn" onclick="startTest()">Take Test</button>
        </div>
        
        <div id="timer">Time spent: 0 seconds</div>
    </div>

    <script>
        let currentPage = 1;
        const totalPages = 4;
        let startTime = Date.now();
        let timerInterval;
        
        function changePage(direction) {
            const newPage = currentPage + direction;
            if (newPage >= 1 && newPage <= totalPages) {
                // Hide current page
                document.getElementById(`page${currentPage}`).classList.remove('active');
                // Update dot indicators
                document.querySelectorAll('.dot')[currentPage - 1].classList.remove('active');
                
                // Show new page
                currentPage = newPage;
                document.getElementById(`page${currentPage}`).classList.add('active');
                document.querySelectorAll('.dot')[currentPage - 1].classList.add('active');
                
                // Update button states
                document.getElementById('prevBtn').disabled = currentPage === 1;
                document.getElementById('nextBtn').disabled = currentPage === totalPages;
            }
        }
        
        function initializePage() {
            const urlParams = new URLSearchParams(window.location.search);
            const topic = urlParams.get('topic');
            
            if (topic) {
                document.getElementById('topicTitle').textContent = decodeURIComponent(topic);
            }
            
            startTimer();
            loadContent();
        }
        
        function startTimer() {
            timerInterval = setInterval(() => {
                const timeSpent = Math.floor((Date.now() - startTime) / 1000);
                document.getElementById('timer').textContent = `Time spent: ${timeSpent} seconds`;
            }, 1000);
        }
        
        async function loadContent() {
            try {
                const response = await fetch('/api/explanation', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify({
                        topic: document.getElementById('topicTitle').textContent
                    })
                });
                
                if (!response.ok) throw new Error('Failed to fetch explanation');
                
                const data = await response.json();
                // Update content for each page as needed
                
            } catch (error) {
                console.error('Error loading content:', error);
            }
        }
        
        function goBack() {
            window.history.back();
        }
        
        function openChatbot() {
            const topic = document.getElementById('topicTitle').textContent;
            window.location.href = `/chatbot.html?topic=${encodeURIComponent(topic)}`;
        }
        
        function startTest() {
            const topic = document.getElementById('topicTitle').textContent;
            window.location.href = `/test.html?topic=${encodeURIComponent(topic)}`;
        }
        
        // Initialize page when loaded
        window.onload = initializePage;
        
        // Save time spent before leaving
        window.onbeforeunload = function() {
            clearInterval(timerInterval);
            const timeSpent = Math.floor((Date.now() - startTime) / 1000);
            localStorage.setItem('lastPageTimeSpent', timeSpent);
        };
    </script>
</body>
</html>